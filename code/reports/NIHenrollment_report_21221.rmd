---
title: "Enrollment Report: BEACH Study Overview (21221L)"
author: "Dominick Lemas"
date: "10/04/2022"
output: html_document

---

```{r, include=FALSE}
##-------------- 
# **************************************************************************** #
# ***************                Project Overview              *************** #
# **************************************************************************** #

# Author:            Dominick J. Lemas
# Start Date:        10/04/2022 
# Date Modify:       
# Project:           The Breastfeeding and EArly Child Health
# IRB:               IRB201601034
#                   
#
# version: R version 4.0.2 (2020-06-22)
# version: Rstudio version Version 1.3.959 

# **************************************************************************** #
# ***************                Description                   *************** #
# **************************************************************************** #

# NOTE: This script consumes data that was generated by:
# ~/code/get_data/get_reportData_21221.Rmd
# ~/code/process_data/format_reportData_21221_NIHenrollment.Rmd

# PLAN: Complete NIH Enrollment Table.

```


```{r, message=FALSE}

# **************************************************************************** #
# ***************                Library                       *************** #
# **************************************************************************** #

library(codified)
library(tidyverse)

# https://cran.r-project.org/web/packages/codified/vignettes/nih-enrollment-html.html


```

```{r, message=FALSE}

# **************************************************************************** #
# ***************              Load/Trim Data                  *************** #
# **************************************************************************** #

load("~/BEACH-reports/data/processed/final_report_21221.RData")

ds=data %>%
  rename(gender=sex_nih,
         ethnicity=ethnicity_nih) %>%
  select(gender,ethnicity,race)
  
ds$gender=as.character(ds$gender)
ds$ethnicity=as.character(ds$ethnicity)
ds$race=as.character(ds$race)


```

```{r, message=FALSE}

# data labels

# gender

ds_lu_gender <- tibble::tribble(
  ~input,   ~displayed            ,
  "0"   ,  "Female"               ,
  "1"   ,  "Male"                 ,
  "NA"   ,  "Unknown/Not Reported"
)
knitr::kable(ds_lu_gender, caption = "Gender Mapping")

# race

ds_lu_race <- tibble::tribble(
  ~input , ~displayed                                   ,
  "NativeAmerican"    , "American Indian/Alaska Native"              ,
  "Asian"             , "Asian",
  "PacificIsland"    , "Native Hawaiian or Other Pacific Islander"  ,
  "Black"    , "Black or African American"                  ,
  "White"    , "White"                                      ,
  "M"    , "More than One Race"                         ,
  "NA"    , "Unknown or Not Reported"
)
knitr::kable(ds_lu_race, caption = "Race Mapping")

# ethnicity

ds_lu_ethnicity <- tibble::tribble(
  ~input,   ~displayed                      ,
  "2"   ,  "Not Hispanic or Latino"         ,
  "1"   ,  "Hispanic or Latino"             ,
  "0"   ,  "Unknown/Not Reported Ethnicity"
)
knitr::kable(ds_lu_ethnicity, caption = "Ethnicity Mapping")


ds_summary_long <- codified::table_nih_enrollment(
  d              = ds,
  d_lu_gender    = ds_lu_gender,
  d_lu_race      = ds_lu_race,
  d_lu_ethnicity = ds_lu_ethnicity
)

knitr::kable(ds_summary_long, caption = "Counts of Each Subgroup")


# NIH enrollment table

codified::table_nih_enrollment_pretty(
  d              = ds,
  d_lu_gender    = ds_lu_gender,
  d_lu_race      = ds_lu_race,
  d_lu_ethnicity = ds_lu_ethnicity
)


```




